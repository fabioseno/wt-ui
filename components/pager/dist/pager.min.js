/*! wt-ui 2014-12-23 */
angular.module("pager",[]),angular.module("pager").directive("pager",function(){"use strict";return{restrict:"AE",replace:!0,scope:{action:"&"},template:'<ul class="pagination" data-ng-show="pages.length > 0"><li><a data-ng-click="previous();">{{ previousText }}</a></li><li data-ng-class="{active: page === currentPage}" data-ng-repeat="page in pages"><a data-ng-click="changePage(page);">{{ page }}</a></li><li><a data-ng-click="next();">{{ nextText }}</a></li></ul>',link:function(a,b,c){function d(){a.visiblePages=a.visiblePages?parseInt(a.visiblePages):a.totalPages<9?a.totalPages:9,a.previousText=c.previousText||"<",a.nextText=c.nextText||">",a.pages=[];var b,d=a.currentPage-Math.floor(a.visiblePages/2);for(1>d?d=1:a.totalPages-d<a.visiblePages&&(d=a.totalPages-a.visiblePages+1),b=d+a.visiblePages-1,b>a.totalPages&&(b=a.totalPages),a.pages=[],e=d;b>=e;e+=1)a.pages.push(e)}var e=0;a.totalPages=0,a.visiblePages=0,a.currentPage=1,a.previous=function(){a.currentPage>1&&(a.currentPage-=1,a.changePage(a.currentPage))},a.next=function(){a.currentPage<a.totalPages&&(a.currentPage+=1,a.changePage(a.currentPage))},a.changePage=function(b){a.currentPage=b,a.action({page:a.currentPage}),d()},c.$observe("totalPages",function(b){b&&(a.totalPages=parseInt(b),d())}),c.$observe("currentPage",function(b){b&&(a.currentPage=parseInt(b),d())}),c.$observe("visiblePages",function(b){b&&(a.visiblePages=parseInt(b)<9?parseInt(b):9,d())})}}});